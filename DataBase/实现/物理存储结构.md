# 数据库实现-物理存储

## 磁盘缓冲处理技术
- 当在主存储器和磁盘之间传输多个数据块时，可以在主存储器中设置多个数据缓冲区。
- 磁盘系统和CPU可以并行工作。当磁盘驱动器与一个缓冲区交换数据时，我们可以令CPU同时处理另一个缓冲区中的数据。
**缓冲区管理**
1. 向缓冲区管理器提出请求;
2. IF 所需磁盘块已在缓冲区B中
3.  THEN 把B的地址传送给请求者;
4.   ELSE 为该磁盘块分配一个空闲缓冲区A;
5.    把磁盘块读入A;
6.    把A的地址传送给请求者.
缓冲区没有空间需要进行内容替换，策略如下。
- LRU（最近最少使用）
- 立即丢弃
- MRU（最近最多使用）

## 磁盘文件种类

- 无序文件
  - 记录随机地存储在文件中，新记录存储在文件的末尾。可用于定长记录文件，也可用于变长记录文件。
  - 查找：线性查找，线性复杂度
    - 必须从文件的第一个记录开始搜索，直到发现满足条件的记录为止。
    - 如果满足条件的记录不止一个，需要搜索整个文件
  - 插入：末端插入
    - 无序文件的头存储它的最末一个磁盘块的地址
  - 删除：
    - 直接删除：会产生空闲碎片空间，需要周期整理
    - 标志删除：增加一个标志位表示删除，也需要周期整理
    - 交换删除：将末尾记录激动到被删除记录位置
- 有序文件
  - 查找：
    - 在排序遇上——二分查找
    - 不在排序域上——线性
  - 插入：
    - 找到插入位置，并对相应位置后的记录整体后移
    - 此操作非常耗时
  - 删除：
    - 标志删除，周期整理
  - 修改：
    - 排序域：
    - 非排序域：先删除，后插入
- 索引文件
- hash文件

